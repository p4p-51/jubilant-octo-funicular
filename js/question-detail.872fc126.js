"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[875],{7548:function(e,n,s){s.r(n),s.d(n,{default:function(){return x}});s(6699);var a=s(3396),i=s(4870),t=s(5782),o=s(242),l=s(8815),u=s(3270),d=s(3752),c=s.n(d),r=s(678),v=s(6537);const w={class:"question-detail-view"},q={key:0,class:"content-container"},p={class:"questions-container"},g={class:"search-bar"},I={class:"list"},f={class:"answer-column"};var k=(0,a.aZ)({__name:"QuestionDetailView",setup(e){const n=(0,r.tv)(),s=(0,r.yj)(),d=async e=>{m.loading=!0;const[n,s]=await(0,v.G)(e.questionId,e.experienceId);H.value.answers=H.value?.answers?.filter((n=>!(n.experienceId==e.experienceId&&n.questionId==e.questionId))),H.value.answerCount--,m.loading=!1},k=(e,n)=>{n?H.value?.answers?.forEach((n=>{n.experienceId==e.experienceId&&(n.answer=e.answer)})):(H.value.answers.push(e),H.value.answerCount++)},C=(0,i.iH)(),h=(0,i.iH)(0),x=async e=>{h.value++,await Z(e)},y=(0,i.iH)(""),_=()=>""===y.value?b.questions:b.questions.filter((e=>e.labelId.toLowerCase().includes(y.value)||e.questionText.toLowerCase().includes(y.value))),m=(0,i.qj)({loading:!0}),b=(0,i.qj)({questions:[]}),H=(0,i.iH)(),Z=async e=>{m.loading=!0,C.value=e;const n=b.questions.find((n=>n.questionId==e));if(void 0==n["answers"]){const[s,a]=await(0,v.xU)(e);s&&(alert("cannot get saved answers to question"),n["answers"]=[]),n["answers"]=a}H.value=n,m.loading=!1};return(0,a.bv)((async()=>{m.loading=!0;const[e,a]=await(0,v.tI)();b.questions=a;let i=!1;C.value=parseInt(s.params.id),b.questions.forEach((e=>{e.questionId==C.value&&(i=!0)})),console.log("question does exist",i),i||n.push("/questions"),await Z(C.value),m.loading=!1})),(e,n)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)((0,i.SU)(c()),{active:m.loading,"onUpdate:active":n[0]||(n[0]=e=>m.loading=e)},null,8,["active"]),(0,a._)("div",w,[(0,a.Wm)(l.Z,{title:"My question bank"}),m.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",q,[(0,a._)("div",p,[(0,a._)("div",g,[(0,a.Wm)(u.Z,{onOnChange:n[1]||(n[1]=e=>y.value=e.toLowerCase())})]),(0,a._)("div",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_(),(e=>((0,a.wg)(),(0,a.j4)(t.Z,{key:e.questionId,numResponses:e.answerCount,title:e.questionText,id:e.questionId,isSelected:e.questionId===C.value,onOnQuestionClick:x},null,8,["numResponses","title","id","isSelected"])))),128))])]),(0,a._)("div",f,[((0,a.wg)(),(0,a.j4)(o.Z,{initialQuestion:H.value,key:h.value,onSaveResponse:k,onDeleteResponse:d},null,8,["initialQuestion"]))])]))])],64))}}),C=s(89);const h=(0,C.Z)(k,[["__scopeId","data-v-42f6cbc2"]]);var x=h}}]);
//# sourceMappingURL=question-detail.872fc126.js.map