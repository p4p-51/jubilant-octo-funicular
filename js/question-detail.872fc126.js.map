{"version":3,"file":"js/question-detail.872fc126.js","mappings":"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","sources":["webpack://frontend/./node_modules/vue-loader/dist/index.js","webpack://frontend/./src/views/QuestionDetailView.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-42f6cbc2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"question-detail-view\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"content-container\"\n}\nconst _hoisted_3 = { class: \"questions-container\" }\nconst _hoisted_4 = { class: \"search-bar\" }\nconst _hoisted_5 = { class: \"list\" }\nconst _hoisted_6 = { class: \"answer-column\" }\n\nimport QbSideBarQuestion from \"@/components/QbSideBarQuestion.vue\";\r\nimport AddQuestionResponse from \"@/components/AddQuestionResponse.vue\";\r\nimport TitleBlock from \"@/components/TitleBlock.vue\";\r\nimport QbSearchBar from \"@/components/QbSearchBar.vue\";\r\nimport { Answer, QuestionResponse } from \"@/types/Question.interface\";\r\nimport { onMounted, reactive, ref } from \"vue\";\r\nimport Loading from \"vue-loading-overlay\";\r\nimport \"vue-loading-overlay/dist/vue-loading.css\";\r\n\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { deleteAnswer, getQuestionAnswer, getQuestions } from \"@/apis/api\"; // import router\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'QuestionDetailView',\n  setup(__props) {\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\n\r\nconst goToGrad = () => {\r\n  router.push(\"/\"); // redirect to home\r\n};\r\n\r\nconst deleteResponse = async (answer: Answer) => {\r\n  isLoading.loading = true;\r\n  const [error, data] = await deleteAnswer(\r\n    answer.questionId!,\r\n    answer.experienceId,\r\n  );\r\n  selectedQuestion.value!.answers = selectedQuestion.value?.answers?.filter(\r\n    (ans) => {\r\n      return !(\r\n        ans.experienceId == answer.experienceId &&\r\n        ans.questionId == answer.questionId\r\n      );\r\n    },\r\n  );\r\n  selectedQuestion.value!.answerCount--;\r\n  isLoading.loading = false;\r\n};\r\nconst saveResponse = (answer: Answer, isEdit: boolean) => {\r\n  if (!isEdit) {\r\n    selectedQuestion.value!.answers!.push(answer);\r\n    selectedQuestion.value!.answerCount!++;\r\n  } else {\r\n    selectedQuestion.value?.answers?.forEach((ans) => {\r\n      if (ans.experienceId == answer.experienceId) {\r\n        ans.answer = answer.answer;\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nconst selectedQuestionId = ref<number>();\r\nconst addQuestionKey = ref<number>(0);\r\nconst onQuestionClick = async (id: number) => {\r\n  addQuestionKey.value++;\r\n  await setSelectedQuestion(id);\r\n};\r\n\r\nconst filter = ref<string>(\"\");\r\nconst filterQuestions = () => {\r\n  if (filter.value === \"\") {\r\n    return questions.questions;\r\n  } else {\r\n    return questions.questions.filter((q) => {\r\n      return (\r\n        q.labelId.toLowerCase().includes(filter.value) ||\r\n        q.questionText.toLowerCase().includes(filter.value)\r\n      );\r\n    });\r\n  }\r\n};\r\n\r\nconst isLoading = reactive({ loading: true });\r\nconst questions = reactive<{ questions: QuestionResponse[] }>({\r\n  questions: [],\r\n});\r\n\r\nconst selectedQuestion = ref<QuestionResponse>();\r\nconst setSelectedQuestion = async (questionId: number) => {\r\n  isLoading.loading = true;\r\n  selectedQuestionId.value = questionId;\r\n  //TODO: Fix this issue if the question cannot be found\r\n  const question = questions.questions.find((q) => q.questionId == questionId);\r\n  if (question![\"answers\"] == undefined) {\r\n    const [error, data] = await getQuestionAnswer(questionId);\r\n    if (error) {\r\n      alert(\"cannot get saved answers to question\");\r\n      question![\"answers\"] = [];\r\n    }\r\n    question![\"answers\"] = data;\r\n  }\r\n\r\n  selectedQuestion.value = question;\r\n  isLoading.loading = false;\r\n};\r\n\r\nonMounted(async () => {\r\n  isLoading.loading = true;\r\n\r\n  const [error, data] = await getQuestions();\r\n  questions.questions = data;\r\n\r\n  let doesQuestionExist = false;\r\n  selectedQuestionId.value = parseInt(route.params.id as unknown as string);\r\n\r\n  questions.questions.forEach((q) => {\r\n    if (q.questionId == selectedQuestionId.value) {\r\n      doesQuestionExist = true;\r\n    }\r\n  });\r\n\r\n  console.log(\"question does exist\", doesQuestionExist);\r\n  if (!doesQuestionExist) {\r\n    router.push(\"/questions\");\r\n  }\r\n\r\n  await setSelectedQuestion(selectedQuestionId.value);\r\n\r\n  isLoading.loading = false;\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_unref(Loading), {\n      active: isLoading.loading,\n      \"onUpdate:active\": _cache[0] || (_cache[0] = ($event: any) => ((isLoading.loading) = $event))\n    }, null, 8, [\"active\"]),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(TitleBlock, { title: \"My question bank\" }),\n      (!isLoading.loading)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createVNode(QbSearchBar, {\n                  onOnChange: _cache[1] || (_cache[1] = (s) => (filter.value = s.toLowerCase()))\n                })\n              ]),\n              _createElementVNode(\"div\", _hoisted_5, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filterQuestions(), (question) => {\n                  return (_openBlock(), _createBlock(QbSideBarQuestion, {\n                    key: question.questionId,\n                    numResponses: question.answerCount,\n                    title: question.questionText,\n                    id: question.questionId,\n                    isSelected: question.questionId === selectedQuestionId.value,\n                    onOnQuestionClick: onQuestionClick\n                  }, null, 8, [\"numResponses\", \"title\", \"id\", \"isSelected\"]))\n                }), 128))\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_6, [\n              (_openBlock(), _createBlock(AddQuestionResponse, {\n                initialQuestion: selectedQuestion.value,\n                key: addQuestionKey.value,\n                onSaveResponse: saveResponse,\n                onDeleteResponse: deleteResponse\n              }, null, 8, [\"initialQuestion\"]))\n            ])\n          ]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./QuestionDetailView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./QuestionDetailView.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./QuestionDetailView.vue?vue&type=style&index=0&id=42f6cbc2&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Owner\\\\Documents\\\\playground\\\\p4p\\\\jubilant-octo-funicular\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-42f6cbc2\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","key","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_defineComponent","__name","setup","__props","router","useRouter","route","useRoute","deleteResponse","async","isLoading","loading","error","data","deleteAnswer","answer","questionId","experienceId","selectedQuestion","value","answers","filter","ans","answerCount","saveResponse","isEdit","forEach","push","selectedQuestionId","ref","addQuestionKey","onQuestionClick","setSelectedQuestion","id","filterQuestions","questions","q","labelId","toLowerCase","includes","questionText","reactive","question","find","undefined","getQuestionAnswer","alert","onMounted","getQuestions","doesQuestionExist","parseInt","params","console","log","_ctx","_cache","_openBlock","_createElementBlock","_Fragment","_createVNode","_unref","Loading","active","$event","_createElementVNode","TitleBlock","title","_createCommentVNode","QbSearchBar","onOnChange","s","_renderList","_createBlock","QbSideBarQuestion","numResponses","isSelected","onOnQuestionClick","AddQuestionResponse","initialQuestion","onSaveResponse","onDeleteResponse","__exports__"],"sourceRoot":""}